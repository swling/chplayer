!function(){var javascriptPath="",scriptList,thisPath;scriptList=document.scripts,thisPath=scriptList[scriptList.length-1].src,javascriptPath=thisPath.substring(0,thisPath.lastIndexOf("/")+1);var chplayer=function(t){t&&this.embed(t)};chplayer.prototype={config:{videoClick:!0,videoDbClick:!0,errorTime:100,videoDrawImage:!1},varsConfig:{container:"",variable:"chplayer",volume:.8,poster:"",autoplay:!0,loop:!1,live:!1,seek:0,drag:"",front:"",next:"",loaded:"",html5m3u8:!1,track:null,chtrack:null,preview:null,prompt:null,video:null,debug:!1},vars:{},language:{volume:"音量：",play:"点击播放",pause:"点击暂停",full:"点击全屏",escFull:"退出全屏",mute:"点击静音",escMute:"取消静音",front:"上一集",next:"下一集",definition:"点击选择清晰度",error:"加载出错"},contextMenu:[["chplayer","link","http://www.chplayer.com"],["v1.0","default"],["播放视频","function","play","line"],["暂停视频","function","pause"],["播放/暂停","function","playOrPause"],["下一集","javascript","nextFun","line"]],errorList:[["000","Object does not exist"],["001","Variables type is not a object"],["002","Video object does not exist"],["003","Video object format error"],["004","Video object format error"],["005","Video object format error"],["006","[error] does not exist "],["007","Ajax error"],["008","Ajax error"],["009","Ajax object format error"],["010","Ajax.status:[error]"]],logo:"",loaded:!1,timerError:null,error:!1,errorUrl:[],errorFunArr:[],timerFull:null,full:!1,fullFunArr:[],videoChangeFunArr:[],timerTime:null,timerBuffer:null,isTimeButtonMove:!0,isTimeButtonDown:!1,isClick:!1,timerClick:null,timerLoading:null,timerCBar:null,needSeek:0,volume:0,time:0,isFirst:!0,html5Video:!0,pdCoor:{x:0,y:0},playerType:"",loadTime:0,body:document.body||document.documentElement,V:null,listenerArr:[],buttonLen:0,buttonArr:[],buttonWidth:{},elementArr:[],track:[],trackIndex:0,nowTrackShow:{sn:""},trackElement:[],timerVCanvas:null,animateArray:[],animateElementArray:[],animatePauseArray:[],previewStart:0,previewDiv:null,previewTop:null,previewWidth:120,previewTween:null,isM3u8:!1,promptArr:[],promptElement:null,embed:function(t){if(null!=t&&t){if("object"!=typeof t&&this.eject(this.errorList[1]),this.vars=this.standardization(this.varsConfig,t),this.vars.video)return this.analysedVideoUrl(this.vars.video),this;this.eject(this.errorList[2])}else this.eject(this.errorList[0])},analysedVideoUrl:function(t){var e=0,i=0,s=this;if(this.VA=[],"string"==typeof t){this.VA=[[t,"","",0]];var n=this.getFileExt(t);switch(n){case".mp4":this.VA[0][1]="video/mp4";break;case".ogg":this.VA[0][1]="video/ogg";break;case".webm":this.VA[0][1]="video/webm"}this.getVideo()}else if("object"==typeof t)if(this.isUndefined(typeof t.length))this.isUndefined(t.type)?this.isUndefined(t.url)?this.eject(this.errorList[5]):(t.success=function(t){s.analysedVideoUrl(t)},this.ajax(t)):(this.VA.push([t.url,t.type,"",0]),this.getVideo());else{if("string"==typeof t[0]){if(t.length%2==1)return void this.eject(this.errorList[3]);for(e=0;e<t.length;e++)e%2==0&&this.VA.push([t[e],t[e+1],"",0])}else if(this.isUndefined(typeof t[0].length))for(e=0;e<t.length;e++){var r=t[e].list;for(i=0;i<r.length;i++)this.VA.push([r[i].url,r[i].type,t[e].definition,this.isUndefined(r[i].weight)?0:r[i].weight])}else this.VA=t;this.getVideo()}else this.eject(this.errorList[4])},getHtml5Video:function(){var t=this.VA,e=[],i=!1,s=document.createElement("video"),n=function(t){var e="";switch(t){case"video/mp4":e="avc1.4D401E, mp4a.40.2";break;case"video/ogg":e="theora, vorbis";break;case"video/webm":e="vp8.0, vorbis"}return e},r=function(t,e){if(s.canPlayType){var i=s.canPlayType(t+';codecs="'+e+'"');return""!=i}this.html5Video=!1};navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i)&&(i=!0);for(var o=0;o<t.length;o++){var a=t[o];a&&(""!=a[1]&&!i&&r(a[1],n(a[1]))&&"rtmp"!=a[0].substr(0,4)&&e.push(a),".m3u8"==this.getFileExt(a[0])&&this.vars.html5m3u8&&(this.isM3u8=!0,e.push(a)))}e.length>0?this.VA=e:i||(this.html5Video=!1)},getVideo:function(){if(this.V)this.changeVideo();else{this.vars.chtrack&&this.loadTrack(),this.getHtml5Video();var t=this,e=this.vars,i="",s="",n="",r="",o="",a="",l=(e.video,0);if(this.CD=this.getByElement(e.container),volume=e.volume,!this.CD)return this.eject(this.errorList[6],e.container),!1;var h="chplayer"+this.randomString(),d=document.createElement("div");if(d.className=h,this.V=void 0,this.CD.innerHTML="",this.CD.appendChild(d),this.PD=this.getByElement(h),this.css(this.CD,{backgroundColor:"#C14550",overflow:"hidden",position:"relative"}),this.css(this.PD,{backgroundColor:"#C14550",width:"100%",height:"100%",fontFamily:'"Microsoft YaHei", YaHei, "微软雅黑", SimHei,"FAE8F6F96C59ED1", "黑体",Arial'}),this.html5Video){if(this.PD.onselectstart=this.PD.ondrag=function(){return!1},1==this.VA.length)i=' src="'+this.VA[0][0]+'"';else{var c=this.VA.slice(0);for(c=this.arrSort(c),l=0;l<c.length;l++){var u="",p=c[l];p[1]&&(u=' type="'+p[1]+'"'),s+='<source src="'+p[0]+'"'+u+">"}}if(e.autoplay&&(o=' autoplay="autoplay"'),e.poster&&(n=' poster="'+e.poster+'"'),e.loop&&(r=' loop="loop"'),e.seek>0&&(this.needSeek=e.seek),null!=e.track&&null==e.chtrack){var m=e.track,f="",v=!1;for(l=0;l<m.length;l++){var g=m[l];g.default&&!v?(f=" default",v=!0):f="",a+='<track kind="'+g.kind+'" src="'+g.src+'" srclang="'+g.srclang+'" label="'+g.label+'"'+f+">"}}var y=this.randomString(),C="";if(C=this.isM3u8?'<video id="'+y+'" width="100%" height="100%"'+n+r+' webkit-playsinline="true">'+a+"</video>":'<video id="'+y+'"'+i+' width="100%" height="100%"'+o+n+r+' webkit-playsinline="true">'+s+a+"</video>",this.PD.innerHTML=C,this.V=this.getByElement("#"+y),this.V.volume=volume,this.isM3u8){var b=function(){t.embedHls(t.VA[0][0],e.autoplay)};this.loadJs(javascriptPath+"hls/hls.min.js",b)}if(this.css(this.V,"backgroundColor","#C14550"),this.config.videoDrawImage){var B="vcanvas"+this.randomString(),x=document.createElement("div");x.className=B,this.PD.appendChild(x),this.MD=this.getByElement(B),this.css(this.MD,{backgroundColor:"#C14550",width:"100%",height:"100%",position:"absolute",display:"none",cursor:"pointer",left:"0px",top:"0px",zIndex:"10"});var w="ccanvas"+this.randomString();this.MD.innerHTML=this.newCanvas(w,this.PD.offsetWidth,this.PD.offsetHeight),this.MDC=this.getByElement(w+"-canvas"),this.MDCX=this.MDC.getContext("2d")}this.playerType="html5video",this.addVEvent(),this.definition(),this.playerLoad()}}},playerLoad:function(){var t=this;this.isFirst&&(this.isFirst=!1,window.setTimeout(function(){t.loadedHandler()},1))},addVEvent:function(){var t=this,e=function(e){t.videoClick()};this.addListener("click",e),this.addListener("click",e,this.MDC),this.timerErrorFun();var i=function(e){t.judgeIsLive()};this.addListener("loadedmetadata",i);var s=function(e){t.playingHandler()};this.addListener("playing",s);var n=function(e){t.pauseHandler()};this.addListener("pause",n);var r=function(e){null!=t.timerLoading&&t.loadingStart(!1)};this.addListener("timeupdate",r);var o=function(e){t.loadingStart(!0)};this.addListener("waiting",o);var a=function(e){t.seekedHandler()};this.addListener("seeked",a);var l=function(e){t.endedHandler()};this.addListener("ended",l);var h=function(e){try{t.volumechangeHandler()}catch(e){}};this.addListener("volumechange",h),this.interFace()},resetPlayer:function(){this.timeTextHandler(),this.timeProgress(0,1),this.initPlayPause(),this.definition(),this.showFrontNext(),this.deletePrompt(),this.deletePreview(),this.trackHide(),this.resetTrack(),this.trackElement=[],this.track=[]},interFace:function(){var t=this,e="",i=38,s=38,n="#FFFFFF",r="#0782F5",o="00:00 / 00:00",a=this.randomString(10),l="controlbgbar"+a,h="controlbar"+a,d="timeprogressbg"+a,c="loadprogress"+a,u="timeprogress"+a,p="timebobg"+a,m="timebo"+a,f="timebw"+a,v="timetext"+a,g="play"+a,y="pause"+a,C="front"+a,b="next"+a,B="full"+a,x="escfull"+a,w="mute"+a,T="escmute"+a,k="volume"+a,F="volumedbg"+a,E="volumebg"+a,L="volumeup"+a,V="volumebo"+a,S="volumebw"+a,I="definition"+a,P="definitionp"+a,j="promptbg"+a,A="prompt"+a,M="dline"+a,H="menu"+a,D="pausecenter"+a,O="loading"+a,W="errortext"+a,N="logo"+a,R=document.createElement("div"),U=document.createElement("div"),z=document.createElement("div"),X=document.createElement("div"),q=document.createElement("div"),_=document.createElement("div"),Y=document.createElement("div"),Q=document.createElement("div"),G=document.createElement("div"),J=document.createElement("div"),$=document.createElement("div"),K=document.createElement("div");R.className=l,U.className=h,z.className=d,X.className=p,Y.className=j,Q.className=A,G.className=H,J.className=P,q.className=D,$.className=O,K.className=N,_.className=W,this.PD.appendChild(R),this.PD.appendChild(U),this.PD.appendChild(z),this.PD.appendChild(X),this.PD.appendChild(Y),this.PD.appendChild(Q),this.PD.appendChild(J),this.PD.appendChild(q),this.PD.appendChild($),this.PD.appendChild(_),this.PD.appendChild(K),this.body.appendChild(G),this.vars.live&&(o=this.getNowDate()),e+='<div class="'+g+'" data-title="'+t.language.play+'">'+this.newCanvas(g,i,s)+"</div>",e+='<div class="'+y+'" data-title="'+t.language.pause+'">'+this.newCanvas(y,i,s)+"</div>",e+='<div class="'+M+'-la"></div>',e+='<div class="'+C+'" data-title="'+t.language.front+'">'+this.newCanvas(C,i,s)+"</div>",e+='<div class="'+M+'-lb"></div>',e+='<div class="'+b+'" data-title="'+t.language.next+'">'+this.newCanvas(b,i,s)+"</div>",e+='<div class="'+M+'-lc"></div>',e+='<div class="'+v+'">'+o+"</div>",e+='<div class="'+B+'" data-title="'+t.language.full+'">'+this.newCanvas(B,i,s)+"</div>",e+='<div class="'+x+'" data-title="'+t.language.escFull+'">'+this.newCanvas(x,i,s)+"</div>",e+='<div class="'+M+'-ra"></div>',e+='<div class="'+I+'" data-title="'+t.language.definition+'"></div>',e+='<div class="'+M+'-rb"></div>',e+='<div class="'+k+'"><div class="'+F+'"><div class="'+E+'"><div class="'+L+'"></div></div><div class="'+V+'"><div class="'+S+'"></div></div></div></div>',e+='<div class="'+w+'" data-title="'+t.language.mute+'">'+this.newCanvas(w,i,s)+"</div>",e+='<div class="'+T+'" data-title="'+t.language.escMute+'">'+this.newCanvas(T,i,s)+"</div>",e+='<div class="'+M+'-rc"></div>',this.getByElement(h).innerHTML=e,this.getByElement(d).innerHTML='<div class="'+c+'"></div><div class="'+u+'"></div>',this.getByElement(p).innerHTML='<div class="'+m+'"><div class="'+f+'"></div></div>',this.getByElement(O).innerHTML=this.newCanvas(O,60,60),this.getByElement(W).innerHTML=this.language.error,this.getByElement(N).innerHTML=this.vars.logo||this.logo;var Z=this.PD;this.CB={controlBarBg:this.getByElement(l,Z),controlBar:this.getByElement(h,Z),promptBg:this.getByElement(j,Z),prompt:this.getByElement(A,Z),timeProgressBg:this.getByElement(d,Z),loadProgress:this.getByElement(c,Z),timeProgress:this.getByElement(u,Z),timeBoBg:this.getByElement(p,Z),timeButton:this.getByElement(m,Z),timeText:this.getByElement(v,Z),play:this.getByElement(g,Z),front:this.getByElement(C,Z),next:this.getByElement(b,Z),pause:this.getByElement(y,Z),definition:this.getByElement(I,Z),definitionP:this.getByElement(P,Z),definitionLine:this.getByElement(M+"-rb",Z),full:this.getByElement(B,Z),escFull:this.getByElement(x,Z),mute:this.getByElement(w,Z),escMute:this.getByElement(T,Z),volume:this.getByElement(k,Z),volumeBg:this.getByElement(E,Z),volumeUp:this.getByElement(L,Z),volumeBO:this.getByElement(V,Z),pauseCenter:this.getByElement(D,Z),menu:this.getByElement(H),loading:this.getByElement(O,Z),loadingCanvas:this.getByElement(O+"-canvas",Z),errorText:this.getByElement(W,Z),logo:this.getByElement(N,Z),playLine:this.getByElement(M+"-la",Z),frontLine:this.getByElement(M+"-lb",Z),nextLine:this.getByElement(M+"-lc",Z),fullLine:this.getByElement(M+"-ra"),definitionLine:this.getByElement(M+"-rb",Z),muteLine:this.getByElement(M+"-rc",Z)},this.buttonWidth={play:i,full:i,front:i,next:i,mute:i},this.css(l,{width:"100%",height:s+"px",backgroundColor:"#C14550",position:"absolute",bottom:"0px",filter:"alpha(opacity:0.8)",opacity:"0.8",zIndex:"90"}),this.css(h,{width:"100%",height:s+"px",position:"absolute",bottom:"0px",zIndex:"90"}),this.css(D,{width:"80px",height:"80px",borderRadius:"50%",position:"absolute",display:"none",cursor:"pointer",zIndex:"100"}),this.css(O,{width:"60px",height:"60px",position:"absolute",display:"none",zIndex:"100"}),this.css(W,{width:"120px",height:"30px",lineHeight:"30px",color:"#FFFFFF",fontSize:"14px",textAlign:"center",position:"absolute",display:"none",zIndex:"101",cursor:"default",zIndex:"100"}),this.css(N,{height:"30px",lineHeight:"30px",color:"#FFFFFF",fontFamily:"Arial",fontSize:"28px",textAlign:"center",position:"absolute",float:"left",left:"-1000px",top:"20px",zIndex:"100",filter:"alpha(opacity:0.8)",opacity:"0.8",cursor:"default"}),this.css(this.CB.loadingCanvas,{transform:"rotate(0deg)",msTransform:"rotate(0deg)",mozTransform:"rotate(0deg)",webkitTransform:"rotate(0deg)",oTransform:"rotate(0deg)"}),this.css([j,A],{height:"30px",lineHeight:"30px",color:"#FFFFFF",fontSize:"14px",textAlign:"center",position:"absolute",borderRadius:"5px",paddingLeft:"5px",paddingRight:"5px",bottom:"0px",display:"none",zIndex:"95"}),this.css(j,{backgroundColor:"#C14550",filter:"alpha(opacity:0.5)",opacity:"0.5"}),this.css(d,{width:"100%",height:"6px",backgroundColor:"#500",overflow:"hidden",position:"absolute",bottom:"38px",zIndex:"88"}),this.css([c,u],{width:"1px",height:"6px",position:"absolute",bottom:"38px",top:"0px",zIndex:"91"}),this.css(c,"backgroundColor","#6F6F6F"),this.css(u,"backgroundColor",r),this.css(p,{width:"100%",height:"14px",overflow:"hidden",position:"absolute",bottom:"34px",cursor:"pointer",zIndex:"92"}),this.css(m,{width:"14px",height:"14px",overflow:"hidden",borderRadius:"50%",backgroundColor:n,cursor:"pointer",position:"absolute",top:"0px",zIndex:"20"}),this.css(f,{width:"8px",height:"8px",overflow:"hidden",borderRadius:"50%",position:"absolute",backgroundColor:r,left:"3px",top:"3px"}),this.css(v,{lineHeight:s+"px",color:"#FFFFFF",fontFamily:"arial",fontSize:"16px",paddingLeft:"10px",float:"left",overflow:"hidden",cursor:"default"}),this.css([M+"-la",M+"-lb",M+"-lc",M+"-ra",M+"-rb",M+"-rc"],{width:"0px",height:s+"px",overflow:"hidden",borderLeft:"1px solid #500",borderRight:"1px solid #500",filter:"alpha(opacity:0.9)",opacity:"0.9"}),this.css([M+"-la",M+"-lb",M+"-lc"],"float","left"),this.css([M+"-ra",M+"-rb",M+"-rc"],"float","right"),this.css([M+"-lb",M+"-lc",M+"-rb"],"display","none"),this.css([g,y,C,b],{width:i+"px",height:s+"px",float:"left",overflow:"hidden",cursor:"pointer"}),this.css([C,b],"display","none"),this.initPlayPause(),this.css([w,T],{width:i+"px",height:s+"px",float:"right",overflow:"hidden",cursor:"pointer"}),this.vars.volume>0?this.css(T,"display","none"):this.css(w,"display","none"),this.css([k,F],{width:"110px",height:s+"px",overflow:"hidden",float:"right"}),this.css(F,{position:"absolute"}),this.css([E,L],{width:"100px",height:"6px",overflow:"hidden",borderRadius:"5px",cursor:"pointer"}),this.css(E,{position:"absolute",top:"16px"}),this.css(E,"backgroundColor","#666666"),this.css(L,"backgroundColor",r),this.buttonWidth.volume=100,this.css(V,{width:"12px",height:"12px",overflow:"hidden",borderRadius:"50%",position:"absolute",backgroundColor:n,top:"13px",left:"0px",cursor:"pointer"}),this.css(S,{width:"6px",height:"6px",overflow:"hidden",borderRadius:"50%",position:"absolute",backgroundColor:r,left:"3px",top:"3px"}),this.css(I,{lineHeight:s+"px",color:"#FFFFFF",float:"right",fontSize:"14px",textAlign:"center",overflow:"hidden",display:"none",cursor:"pointer"}),this.css(P,{lineHeight:s-8+"px",color:"#FFFFFF",overflow:"hidden",position:"absolute",bottom:"4px",backgroundColor:"#C14550",textAlign:"center",zIndex:"95",cursor:"pointer",display:"none"}),this.css([B,x],{width:i+"px",height:s+"px",float:"right",overflow:"hidden",cursor:"pointer"}),this.css(x,"display","none");var tt=this.getByElement(g+"-canvas").getContext("2d"),et=function(){t.canvasFill(tt,[[12,10],[29,19],[12,28]])};tt.fillStyle=n,et();var it=function(t){tt.clearRect(0,0,i,s),tt.fillStyle=r,et()},st=function(t){tt.clearRect(0,0,i,s),tt.fillStyle=n,et()};this.addListener("mouseover",it,this.getByElement(g+"-canvas")),this.addListener("mouseout",st,this.getByElement(g+"-canvas"));var nt=this.getByElement(y+"-canvas").getContext("2d"),rt=function(){t.canvasFillRect(nt,[[10,10,5,18],[22,10,5,18]])};nt.fillStyle=n,rt();var ot=function(t){nt.clearRect(0,0,i,s),nt.fillStyle=r,rt()},at=function(t){nt.clearRect(0,0,i,s),nt.fillStyle=n,rt()};this.addListener("mouseover",ot,this.getByElement(y+"-canvas")),this.addListener("mouseout",at,this.getByElement(y+"-canvas"));var lt=this.getByElement(C+"-canvas").getContext("2d"),ht=function(){t.canvasFill(lt,[[16,19],[30,10],[30,28]]),t.canvasFillRect(lt,[[8,10,5,18]])};lt.fillStyle=n,ht();var dt=function(t){lt.clearRect(0,0,i,s),lt.fillStyle=r,ht()},ct=function(t){lt.clearRect(0,0,i,s),lt.fillStyle=n,ht()};this.addListener("mouseover",dt,this.getByElement(C+"-canvas")),this.addListener("mouseout",ct,this.getByElement(C+"-canvas"));var ut=this.getByElement(b+"-canvas").getContext("2d"),pt=function(){t.canvasFill(ut,[[8,10],[22,19],[8,28]]),t.canvasFillRect(ut,[[25,10,5,18]])};ut.fillStyle=n,pt();var mt=function(t){ut.clearRect(0,0,i,s),ut.fillStyle=r,pt()},ft=function(t){ut.clearRect(0,0,i,s),ut.fillStyle=n,pt()};this.addListener("mouseover",mt,this.getByElement(b+"-canvas")),this.addListener("mouseout",ft,this.getByElement(b+"-canvas"));var vt=this.getByElement(B+"-canvas").getContext("2d"),gt=function(){t.canvasFillRect(vt,[[19,10,9,3],[25,13,3,6],[10,19,3,9],[13,25,6,3]])};vt.fillStyle=n,gt();var yt=function(){vt.clearRect(0,0,i,s),vt.fillStyle=r,gt()},Ct=function(){vt.clearRect(0,0,i,s),vt.fillStyle=n,gt()};this.addListener("mouseover",yt,this.getByElement(B+"-canvas")),this.addListener("mouseout",Ct,this.getByElement(B+"-canvas"));var bt=this.getByElement(x+"-canvas").getContext("2d"),Bt=function(){t.canvasFillRect(bt,[[20,9,3,9],[23,15,6,3],[9,20,9,3],[15,23,3,6]])};bt.fillStyle=n,Bt();var xt=function(){bt.clearRect(0,0,i,s),bt.fillStyle=r,Bt()},wt=function(){bt.clearRect(0,0,i,s),bt.fillStyle=n,Bt()};this.addListener("mouseover",xt,this.getByElement(x+"-canvas")),this.addListener("mouseout",wt,this.getByElement(x+"-canvas"));var Tt=this.getByElement(w+"-canvas").getContext("2d"),kt=function(){t.canvasFill(Tt,[[10,15],[15,15],[21,10],[21,28],[15,23],[10,23]]),t.canvasFillRect(Tt,[[23,15,2,8],[27,10,2,18]])};Tt.fillStyle=n,kt();var Ft=function(){Tt.clearRect(0,0,i,s),Tt.fillStyle=r,kt()},Et=function(){Tt.clearRect(0,0,i,s),Tt.fillStyle=n,kt()};this.addListener("mouseover",Ft,this.getByElement(w+"-canvas")),this.addListener("mouseout",Et,this.getByElement(w+"-canvas"));var Lt=this.getByElement(T+"-canvas").getContext("2d"),Vt=function(){t.canvasFill(Lt,[[10,15],[15,15],[21,10],[21,28],[15,23],[10,23]]),t.canvasFill(Lt,[[23,13],[24,13],[33,25],[32,25]]),t.canvasFill(Lt,[[32,13],[33,13],[24,25],[23,25]])};Lt.fillStyle=n,Vt();var St=function(){Lt.clearRect(0,0,i,s),Lt.fillStyle=r,Vt()},It=function(){Lt.clearRect(0,0,i,s),Lt.fillStyle=n,Vt()};this.addListener("mouseover",St,this.getByElement(T+"-canvas")),this.addListener("mouseout",It,this.getByElement(T+"-canvas"));var Pt=this.getByElement(O+"-canvas").getContext("2d"),jt=function(){Pt.save();var t=Pt.createLinearGradient(0,0,60,60);t.addColorStop(0,n);var e=Pt.createLinearGradient(0,0,80,60);e.addColorStop(1,r),Pt.strokeStyle=t,Pt.lineWidth=8,Pt.beginPath(),Pt.arc(30,30,25,.25*Math.PI,2*Math.PI,!1),Pt.stroke(),Pt.closePath(),Pt.beginPath(),Pt.strokeStyle=e,Pt.arc(30,30,25,0,.25*Math.PI,!1),Pt.stroke(),Pt.closePath(),Pt.restore()};Pt.fillStyle=n,jt();var At=function(){t.css(V,"backgroundColor",r),t.css(S,"backgroundColor",n)},Mt=function(){t.css(V,"backgroundColor",n),t.css(S,"backgroundColor",r)};this.addListener("mouseover",At,this.getByElement(V)),this.addListener("mouseout",Mt,this.getByElement(V));var Ht=function(){t.css(m,"backgroundColor",r),t.css(f,"backgroundColor",n)},Dt=function(){t.css(m,"backgroundColor",n),t.css(f,"backgroundColor",r)};this.addListener("mouseover",Ht,this.getByElement(m)),this.addListener("mouseout",Dt,this.getByElement(m)),this.addButtonEvent(),this.newMenu(),this.controlBarHide(),this.keypress(),this.changeVolume(this.vars.volume),this.showFrontNext(),window.setTimeout(function(){t.elementCoordinate()},100),this.checkBarWidth();var Ot=function(){t.elementCoordinate(),t.timeUpdateHandler(),t.changeLoad(),t.checkBarWidth(),t.changeElementCoor(),t.changePrompt()};this.addListener("resize",Ot,window)},newCanvas:function(t,e,i){return'<canvas class="'+t+'-canvas" width="'+e+'" height="'+i+'"></canvas>'},addButtonEvent:function(){var thisTemp=this,playClick=function(t){thisTemp.play()};this.addListener("click",playClick,this.CB.play),this.addListener("click",playClick,this.CB.pauseCenter);var pauseClick=function(t){thisTemp.pause()};this.addListener("click",pauseClick,this.CB.pause);var frontClick=function(event){thisTemp.vars.front&&eval(thisTemp.vars.front+"()")};this.addListener("click",frontClick,this.CB.front);var nextClick=function(event){thisTemp.vars.next&&eval(thisTemp.vars.next+"()")};this.addListener("click",nextClick,this.CB.next);var muteClick=function(t){thisTemp.changeVolumeTemp=thisTemp.V&&thisTemp.V.volume>0?thisTemp.V.volume:thisTemp.vars.volume,thisTemp.changeVolume(0)};this.addListener("click",muteClick,this.CB.mute);var escMuteClick=function(t){thisTemp.changeVolume(thisTemp.changeVolumeTemp>0?thisTemp.changeVolumeTemp:thisTemp.vars.volume)};this.addListener("click",escMuteClick,this.CB.escMute);var fullClick=function(t){thisTemp.fullScreen()};this.addListener("click",fullClick,this.CB.full);var escFullClick=function(t){thisTemp.quitFullScreen()};this.addListener("click",escFullClick,this.CB.escFull);var promptHide=function(t){thisTemp.promptShow(!1)},playOver=function(t){thisTemp.promptShow(thisTemp.CB.play)};this.addListener("mouseover",playOver,this.CB.play),this.addListener("mouseout",promptHide,this.CB.play);var pauseOver=function(t){thisTemp.promptShow(thisTemp.CB.pause)};this.addListener("mouseover",pauseOver,this.CB.pause),this.addListener("mouseout",promptHide,this.CB.pause);var frontOver=function(t){thisTemp.promptShow(thisTemp.CB.front)};this.addListener("mouseover",frontOver,this.CB.front),this.addListener("mouseout",promptHide,this.CB.front);var nextOver=function(t){thisTemp.promptShow(thisTemp.CB.next)};this.addListener("mouseover",nextOver,this.CB.next),this.addListener("mouseout",promptHide,this.CB.next);var muteOver=function(t){thisTemp.promptShow(thisTemp.CB.mute)};this.addListener("mouseover",muteOver,this.CB.mute),this.addListener("mouseout",promptHide,this.CB.mute);var escMuteOver=function(t){thisTemp.promptShow(thisTemp.CB.escMute)};this.addListener("mouseover",escMuteOver,this.CB.escMute),this.addListener("mouseout",promptHide,this.CB.escMute);var fullOver=function(t){thisTemp.promptShow(thisTemp.CB.full)};this.addListener("mouseover",fullOver,this.CB.full),this.addListener("mouseout",promptHide,this.CB.full);var escFullOver=function(t){thisTemp.promptShow(thisTemp.CB.escFull)};this.addListener("mouseover",escFullOver,this.CB.escFull),this.addListener("mouseout",promptHide,this.CB.escFull);var definitionOver=function(t){thisTemp.promptShow(thisTemp.CB.definition)};this.addListener("mouseover",definitionOver,this.CB.definition),this.addListener("mouseout",promptHide,this.CB.definition);var volumePrompt=function(t){var e=thisTemp.getCoor(thisTemp.CB.volumeBO),i={title:thisTemp.language.volume+t+"%",x:e.x+.5*thisTemp.CB.volumeBO.offsetWidth,y:e.y};thisTemp.promptShow(!1,i)},volumeObj={slider:this.CB.volumeBO,follow:this.CB.volumeUp,refer:this.CB.volumeBg,grossValue:"volume",pd:!0,startFun:function(t){},monitorFun:function(t){thisTemp.changeVolume(.01*t,!1,!1),volumePrompt(t)},endFun:function(t){},overFun:function(t){volumePrompt(t)}};this.slider(volumeObj);var volumeClickObj={refer:this.CB.volumeBg,grossValue:"volume",fun:function(t){thisTemp.changeVolume(.01*t,!0,!0)}};this.progressClick(volumeClickObj),this.timeButtonMouseDown();var volumeBgMove=function(t){var e=thisTemp.getCoor(thisTemp.CB.volumeBg),i=thisTemp.client(t).x,s=parseInt(100*(i-e.x)/thisTemp.CB.volumeBg.offsetWidth),n={title:thisTemp.language.volume+s+"%",x:i,y:e.y};thisTemp.promptShow(!1,n)};this.addListener("mousemove",volumeBgMove,this.CB.volumeBg),this.addListener("mouseout",promptHide,this.CB.volumeBg),this.addListener("mouseout",promptHide,this.CB.volumeBO),this.addDefListener()},videoClick:function(){var t=this,e=function(){null!=t.timerClick&&(t.timerClick.runing&&t.timerClick.stop(),t.timerClick=null)},i=function(){e(),t.isClick=!1,t.playOrPause()};e(),this.isClick?(this.isClick=!1,t.config.videoDbClick&&(this.full?t.quitFullScreen():t.fullScreen())):(this.isClick=!0,this.timerClick=new this.timer(300,i,1))},timeButtonMouseDown:function(){var t=this,e=function(e){isNaN(e)&&(e=0);var i=t.getCoor(t.CB.timeButton),s={title:t.formatTime(e),x:i.x-t.pdCoor.x+.5*t.CB.timeButton.offsetWidth,y:i.y-t.pdCoor.y};t.promptShow(!1,s)},i={slider:this.CB.timeButton,follow:this.CB.timeProgress,refer:this.CB.timeBoBg,grossValue:"time",pd:!1,startFun:function(e){t.isTimeButtonMove=!1},monitorFun:function(t){},endFun:function(e){t.V&&t.V.duration>0&&(t.needSeek=0,t.seek(parseInt(e)))},overFun:function(t){e(t)}},s={refer:this.CB.timeBoBg,grossValue:"time",fun:function(e){t.V&&t.V.duration>0&&(t.needSeek=0,t.seek(parseInt(e)))}},n=function(e){var i=t.getCoor(t.CB.timeBoBg),s=t.client(e).x,n=parseInt((s-i.x)*t.V.duration/t.CB.timeBoBg.offsetWidth),r={title:t.formatTime(n),x:s,y:i.y};t.promptShow(!1,r);var o=!1;t.isUndefined(t.CB.definitionP)||"block"!=t.css(t.CB.definitionP,"display")&&(o=!0),null!=t.vars.preview&&o&&(r.time=n,t.preview(r))},r=function(e){t.promptShow(!1),null!=t.previewDiv&&t.css([t.previewDiv,t.previewTop],"display","none")};this.vars.live?(this.isTimeButtonDown=!1,i.removeListener=!0,s.removeListener=!0):(this.isTimeButtonDown=!0,this.addListener("mousemove",n,this.CB.timeBoBg),this.addListener("mouseout",r,this.CB.timeBoBg)),this.slider(i),this.progressClick(s)},progressClick:function(t){var e=this,i=function(i){var s=e.client(i).x-e.getCoor(t.refer).x,n=t.refer.offsetWidth,r=0;"volume"==t.grossValue?r=100:e.V&&(r=e.V.duration);var o=parseInt(s*r/n);t.fun&&t.fun(o)};this.isUndefined(t.removeListener)?this.addListener("click",i,t.refer):this.removeListener("click",i,t.refer)},slider:function(t){var e=this,i=0,s=0,n=0,r=0,o=function(){var i=parseInt(e.css(t.slider,"left")),s=t.refer.offsetWidth-t.slider.offsetWidth,n=0;return(e.isUndefined(i)||isNaN(i))&&(i=0),"volume"==t.grossValue?n=100:e.V&&(n=e.V.duration),parseInt(i*n/s)},a=function(a){e.addListener("mousemove",l,document),e.addListener("mouseup",h,document);var d=e.getCoor(t.refer),c=e.getCoor(t.slider);i=e.client(a).x,r=d.x,n=c.x,s=i-n,t.startFun&&t.startFun(o())},l=function(n){i=e.client(n).x;var a=i-s-r;a<0&&(a=0),a>t.refer.offsetWidth-t.slider.offsetWidth&&(a=t.refer.offsetWidth-t.slider.offsetWidth),e.css(t.slider,"left",a+"px"),e.css(t.follow,"width",a+.5*t.slider.offsetWidth+"px");var l=o();t.monitorFun&&t.monitorFun(l)},h=function(i){e.removeListener("mousemove",l,document),e.removeListener("mouseup",h,document),t.endFun&&t.endFun(o())},d=function(e){t.overFun&&t.overFun(o())};this.isUndefined(t.removeListener)?(this.addListener("mousedown",a,t.slider),this.addListener("mouseover",d,t.slider)):(this.removeListener("mousedown",a,t.slider),this.removeListener("mouseover",d,t.slider))},loadingStart:function(t){var e=this;this.isUndefined(t)&&(t=!0),this.css(e.CB.loading,"display","none"),null!=this.timerLoading&&(this.timerLoading.runing&&this.timerLoading.stop(),this.timerLoading=null);var i=function(){var t="0";try{t=e.css(e.CB.loadingCanvas,"transform")||e.css(e.CB.loadingCanvas,"-ms-transform")||e.css(e.CB.loadingCanvas,"-moz-transform")||e.css(e.CB.loadingCanvas,"-webkit-transform")||e.css(e.CB.loadingCanvas,"-o-transform")||"0"}catch(t){}t=parseInt(t.replace("rotate(","").replace("deg);","")),t+=4,t>360&&(t=0),e.css(e.CB.loadingCanvas,{transform:"rotate("+t+"deg)",msTransform:"rotate("+t+"deg)",mozTransform:"rotate("+t+"deg)",webkitTransform:"rotate("+t+"deg)",oTransform:"rotate("+t+"deg)"})};t&&(this.timerLoading=new this.timer(10,i),this.css(e.CB.loading,"display","block"))},showFrontNext:function(){this.vars.front?this.css([this.CB.front,this.CB.frontLine],"display","block"):this.css([this.CB.front,this.CB.frontLine],"display","none"),this.vars.next?this.css([this.CB.next,this.CB.nextLine],"display","block"):this.css([this.CB.next,this.CB.nextLine],"display","none")},promptShow:function(t,e){var i={};if(t||e){if(this.isUndefined(e)){var s=this.getCoor(t);i={title:t.dataset.title,x:s.x+.5*t.offsetWidth,y:s.y}}else i=e;this.CB.prompt.innerHTML=i.title,this.css(this.CB.prompt,"display","block");var n=10*this.getStringLen(i.title);this.css(this.CB.promptBg,"width",n+"px"),this.css(this.CB.prompt,"width",n+"px"),n+=10;var r=i.x-.5*n,o=this.PD.offsetHeight-i.y+8;r<0&&(r=0),r>this.PD.offsetWidth-n&&(r=this.PD.offsetWidth-n),this.css([this.CB.promptBg,this.CB.prompt],{display:"block",left:r+"px",bottom:o+"px"})}else this.css([this.CB.promptBg,this.CB.prompt],{display:"none"})},timerErrorFun:function(){var t=this,e=function(e){null!=t.timerError&&(t.timerError.runing&&t.timerError.stop(),t.timerError=null)},i=function(i){e(),t.error=!0,t.errorUrl=t.getVideoUrl(),t.addListenerError(),t.css(t.CB.errorText,"display","block"),t.css(t.CB.pauseCenter,"display","none"),t.css(t.CB.loading,"display","none"),t.V.removeAttribute("poster"),t.resetPlayer()},s=function(e){window.setTimeout(function(){isNaN(t.V.duration)&&i(e)},500)};this.addListener("error",s,this.V),e();var n=function(){t.V&&3==parseInt(t.V.networkState)&&i()};this.timerError=new this.timer(this.config.errorTime,n)},judgeFullScreen:function(){var t=this;null!=this.timerFull&&(this.timerFull.runing&&this.timerFull.stop(),this.timerFull=null);var e=function(){t.isFullScreen()};this.timerFull=new this.timer(20,e)},isFullScreen:function(){var t=this.CB.controlBarBg.offsetWidth,e=this.CD.offsetWidth;t==e||this.full||(this.full=!0,this.addListenerFull(),this.elementCoordinate(),this.css(this.CB.full,"display","none"),this.css(this.CB.escFull,"display","block"),0==this.vars.live&&this.timeUpdateHandler(),this.PD.appendChild(this.CB.menu)),t==e&&this.full&&(this.full=!1,this.addListenerFull(),this.elementCoordinate(),this.css(this.CB.full,"display","block"),this.css(this.CB.escFull,"display","none"),null!=this.timerFull&&(this.timerFull.runing&&this.timerFull.stop(),this.timerFull=null),0==this.vars.live&&this.timeUpdateHandler(),this.body.appendChild(this.CB.menu))},newMenu:function(){var t=this,e=0;this.css(this.CB.menu,{backgroundColor:"#FFFFFF",padding:"5px",position:"absolute",left:"10px",top:"20px",display:"none",zIndex:"999",color:"#A1A9BE",boxShadow:"2px 2px 3px #AAAAAA"});var i=this.contextMenu,s="";for(e=0;e<i.length;e++){var n=i[e];switch(n[1]){case"default":s+="<p>"+n[0]+"</p>";break;case"link":s+='<p><a href="'+n[2]+'" target="_blank">'+n[0]+"</a></p>";break;case"javascript":s+='<p><a href="javascript:'+n[2]+'()">'+n[0]+"</a></p>";break;case"function":s+='<p><a href="javascript:'+this.vars.variable+"."+n[2]+'()">'+n[0]+"</a></p>"}}this.CB.menu.innerHTML=s;var r=this.CB.menu.childNodes;for(e=0;e<r.length;e++){this.css(r[e],{height:"30px",lineHeight:"30px",margin:"0px",fontFamily:'"Microsoft YaHei", YaHei, "微软雅黑", SimHei,"FAE8F6F96C59ED1", "黑体",Arial',fontSize:"12px",paddingLeft:"10px",paddingRight:"30px"}),i[e].length>=4&&"line"==i[e][3]&&this.css(r[e],"borderTop","1px solid #e9e9e9");for(var o=r[e].childNodes,a=0;a<o.length;a++)"a"==o[a].localName&&this.css(o[a],{color:"#C14550",textDecoration:"none"})}this.PD.oncontextmenu=function(e){var i=e||window.event,s=t.client(e);if(2==i.button){i.returnvalue=!1;var n=s.x+t.pdCoor.x-2,r=s.y+t.pdCoor.y-2;return t.css(t.CB.menu,{display:"block",left:n+"px",top:r+"px"}),!1}return!0};var l=function(){
h&&(window.clearTimeout(h),h=null)},h=null,d=function(e){l(),h=window.setTimeout(function(e){t.css(t.CB.menu,"display","none")},500)};this.addListener("mouseout",d,t.CB.menu);var c=function(t){l()};this.addListener("mouseover",c,t.CB.menu)},controlBarHide:function(){var t=this,e={x:0,y:0},i={x:0,y:0},s=!0,n=function(e){if(e&&!s)s=!0,t.css(t.CB.controlBarBg,"display","block"),t.css(t.CB.controlBar,"display","block"),t.css(t.CB.timeProgressBg,"display","block"),t.css(t.CB.timeBoBg,"display","block");else if(s){s=!1;var i=t.getMetaDate().paused;i||(t.css(t.CB.controlBarBg,"display","none"),t.css(t.CB.controlBar,"display","none"),t.css(t.CB.timeProgressBg,"display","none"),t.css(t.CB.timeBoBg,"display","none"),t.promptShow(!1))}},r=function(r){if(e.x==i.x&&e.y==i.y){var o=parseInt(t.CD.offsetHeight);e.y<o-50||e.y}else s||n(!0);i={x:e.x,y:e.y}};this.timerCBar=new this.timer(2e3,r);var o=function(i){var r=t.client(i);e.x=r.x,e.y=r.y,s||n(!0)};this.addListener("mousemove",o,t.CD),this.addListener("ended",o),this.addListener("resize",o,window)},keypress:function(){var t=this,e=function(e){var i=e.keyCode||e.which,s=0;switch(i){case 32:t.playOrPause();break;case 37:s=t.time-10,t.seek(s<0?0:s);break;case 39:s=t.time+10,t.seek(s);break;case 38:s=t.volume+.1,t.changeVolume(s>1?1:s);break;case 40:s=t.volume-.1,t.changeVolume(s<0?0:s)}};this.addListener("keydown",e,window||document)},definition:function(){var t=this,e=this.VA,i=[],s="",n="",r=0;for(r=0;r<e.length;r++){var o=e[r][2];-1==i.indexOf(o)&&i.push(o),this.V&&e[r][0]==this.V.currentSrc&&(n=o)}if(n||(n=i[0]),i.length>1){var a=0;for(r=0;r<i.length;r++){s="<p>"+i[r]+"</p>"+s;var l=this.getStringLen(i[r]);l>a&&(a=l)}s&&(s+="<p>"+n+"</p>"),this.CB.definition.innerHTML=n,this.CB.definitionP.innerHTML=s,this.css([this.CB.definition,this.CB.definitionLine],"display","block");var h=this.CB.definitionP.childNodes;for(r=0;r<h.length;r++){var d="#FFFFFF";h[r].innerHTML==n&&(d="#0782F5"),this.css(h[r],{color:d,margin:"0px",padding:"0px",fontSize:"14px"}),r<h.length-1&&this.css(h[r],"borderBottom","1px solid #282828");var c=function(){n!=this.innerHTML&&(t.css(t.CB.definitionP,"display","none"),t.newDefinition(this.innerHTML))};this.addListener("click",c,h[r])}var u=10*a+20;this.css(this.CB.definitionP,{width:u+"px"}),this.css(this.CB.definition,{width:u+"px"}),this.buttonWidth.definition=this.CB.definition.offsetWidth}else this.CB.definition.innerHTML="",this.CB.definitionP.innerHTML="",this.css([this.CB.definition,this.CB.definitionLine],"display","none")},addDefListener:function(){var t=this,e=null,i=function(e){t.css(t.CB.definitionP,{left:t.getCoor(t.CB.definition).x+"px",display:"block"})};this.addListener("click",i,this.CB.definition);var s=function(i){e&&(window.clearTimeout(e),e=null),e=window.setTimeout(function(e){t.css(t.CB.definitionP,"display","none")},500)};this.addListener("mouseout",s,t.CB.definitionP);var n=function(t){e&&(window.clearTimeout(e),e=null)};this.addListener("mouseover",n,t.CB.definitionP)},newDefinition:function(t){var e=this.VA,i=[],s=0;for(s=0;s<e.length;s++){var n=e[s];n[2]==t&&i.push(n)}if(!(i.length<1)){if(null!=this.V&&0==this.needSeek&&(this.needSeek=this.V.currentTime),".m3u8"!=this.getFileExt(i[0][0])&&(this.isM3u8=!1),this.isM3u8)this.embedHls(e[0][0],this.vars.autoplay);else if(1==i.length)this.V.innerHTML="",this.V.src=i[0][0];else{var r="";for(i=this.arrSort(i),s=0;s<i.length;s++){var o="",a=i[s];a[1]&&(o=' type="'+a[1]+'"'),r+='<source src="'+a[0]+'"'+o+">"}this.V.removeAttribute("src"),this.V.innerHTML=r}this.V.autoplay="autoplay",this.V.load(),this.timerErrorFun(),this.addListenerVideoChange()}},embedHls:function(t,e){var i=this;if(Hls.isSupported()){var s=new Hls;s.loadSource(t),s.attachMedia(this.V),s.on(Hls.Events.MANIFEST_PARSED,function(){i.playerLoad(),e&&i.play()})}},prompt:function(){var t=this,e=this.vars.prompt;if(!(null==e||this.promptArr.length>0)){var i=function(e){if(null==t.promptElement){var i="prompte"+t.randomString(5),s=document.createElement("div");s.className=i,t.PD.appendChild(s),t.promptElement=t.getByElement(i),t.css(t.promptElement,{overflowX:"hidden",lineHeight:"22px",fontSize:"14px",color:"#FFFFFF",position:"absolute",display:"block",zIndex:"90"})}var n=t.getPromptTest(),r=n.pW,o=n.pT,a=parseInt(t.css(this,"left"))-parseInt(.5*r);n.pL>10&&(a=n.pL),a<0&&(a=0),t.css(t.promptElement,{width:r+"px",left:-r-10+"px",display:"block"}),t.promptElement.innerHTML=this.dataset.words,t.css(t.promptElement,{left:a+"px",top:o-t.promptElement.offsetHeight+"px"})},s=function(e){null!=t.promptElement&&t.css(t.promptElement,{display:"none"})},n=0;for(n=0;n<e.length;n++){var r=e[n],o=r.words,a=r.time,l="prompt"+this.randomString(5),h=document.createElement("div");h.className=l,this.CB.timeBoBg.appendChild(h);var d=this.getByElement(l);d.setAttribute("data-time",a),d.setAttribute("data-words",o),this.css(d,{width:"6px",height:"6px",backgroundColor:"#FFFFFF",position:"absolute",top:"4px",left:"-100px",display:"none",zIndex:"1"}),this.addListener("mouseover",i,d),this.addListener("mouseout",s,d),this.promptArr.push(d)}this.changePrompt()}},getPromptTest:function(){var t=this.previewWidth,e=this.getCoor(this.CB.timeButton).y,i=0;return null!=this.previewTop?(e-=parseInt(this.css(this.previewTop,"height")),i=parseInt(this.css(this.previewTop,"left"))):e-=35,i+=2,i<0&&(i=0),i>this.PD.offsetWidth-t&&(i=this.PD.offsetWidth-t),{pW:t,pT:e,pL:i}},deletePrompt:function(){var t=this.promptArr;if(t.length>0)for(var e=0;e<t.length;e++)t[e]&&this.deleteChild(t[e]);this.promptArr=[]},changePrompt:function(){if(0!=this.promptArr.length)for(var t=this.promptArr,e=this.getMetaDate().duration,i=this.CB.timeBoBg.offsetWidth,s=0;s<t.length;s++){var n=parseInt(t[s].dataset.time),r=parseInt(n*i/e)-parseInt(.5*t[s].offsetWidth);r<0&&(r=0),r>i-parseInt(.5*t[s].offsetWidth)&&(r=i-parseInt(.5*t[s].offsetWidth)),this.css(t[s],{left:r+"px",display:"block"})}},preview:function(t){var e=this,i={src:null,scale:0};if(i=this.standardization(i,this.vars.preview),!(null==i.src||i.scale<=0)){var s=i.src;if(0!=this.previewStart){if(2==this.previewStart){var n=!0,r=parseInt(t.time/this.vars.preview.scale),o=parseInt(e.getMetaDate().duration/this.vars.preview.scale);"none"==e.css(e.previewDiv,"display")&&(n=!1),e.css(e.previewDiv,"display","block");var a=.01*e.previewDiv.offsetWidth/s.length,l=a*r-t.x+parseInt(.5*a),h=t.y-e.previewDiv.offsetHeight;e.css(e.previewDiv,"top",h+2+"px");var d=t.x-parseInt(.5*a),c=0;d<0&&(d=0,c=t.x-d-.5*a),d>e.PD.offsetWidth-a&&(d=e.PD.offsetWidth-a,c=t.x-d-.5*a),l<0&&(l=0),l>o*a-e.PD.offsetWidth&&(l=o*a-e.PD.offsetWidth),e.css(e.previewTop,{left:d+"px",top:h+2+"px",display:"block"}),e.previewTop.offsetHeight>e.previewDiv.offsetHeight&&e.css(e.previewTop,{height:e.previewDiv.offsetHeight-(e.previewTop.offsetHeight-e.previewDiv.offsetHeight)+"px"}),null!=this.previewTween&&(this.animatePause(this.previewTween),this.previewTween=null);var u=parseInt(e.css(e.previewDiv,"left"));if(u==-(l+c))return;if(n){t={element:e.previewDiv,start:null,end:-(l+c),speed:.3};this.previewTween=this.animate(t)}else e.css(e.previewDiv,"left",-(l+c)+"px")}}else{if(this.previewStart=1,s.length>0)var p=0,m=0,f=0,v=e.randomString(10),g=0,y=function(i){s[i]=e.getNewUrl(s[i]);var n=0,r=new Image;r.src=s[i],r.className=v+i,r.onload=function(o){if(g++,null==e.previewDiv){m=r.width,f=r.height,e.previewWidth=parseInt(.1*m);var a=document.createElement("div");a.className=v,e.PD.appendChild(a),e.previewDiv=e.getByElement(v);var l=t.y-parseInt(.1*f)+2;e.css(e.previewDiv,{width:s.length*m*10+"px",height:parseInt(.1*f)+"px",backgroundColor:"#C14550",position:"absolute",left:"0px",top:l+"px",display:"none",zIndex:"80"}),a.setAttribute("data-x","0"),a.setAttribute("data-y",l);var h=document.createElement("div");h.className=v+"d2",e.PD.appendChild(h),e.previewTop=e.getByElement(h.className),e.css(e.previewTop,{width:parseInt(.1*m)+"px",height:parseInt(.1*f)+"px",position:"absolute",border:"5px solid "+e.css(e.CB.timeProgress,"backgroundColor"),left:"0px",top:t.y-parseInt(.1*f)+2+"px",display:"none",zIndex:"81"});var d="";for(n=0;n<s.length;n++)d+=e.newCanvas(v+n,10*m,parseInt(.1*f));e.previewDiv.innerHTML=d}e.previewDiv.appendChild(r);var c=e.getByElement(r.className),u=e.getByElement(r.className+"-canvas"),p=u.getContext("2d"),C=0,b=0,B=0,x=parseInt(.1*f);for(n=0;n<100;n++)B=parseInt(n*m*.1),p.drawImage(c,C,b,parseInt(.1*m),x,B,0,parseInt(.1*m),x),C+=parseInt(.1*m),C>=m&&(C=0,b+=x),e.css(c,"display","none");g==s.length?e.previewStart=2:(i++,y(i))}};y(p)}}},deletePreview:function(){null!=this.previewDiv&&(this.deleteChild(this.previewDiv),this.previewDiv=null,this.previewStart=0)},changeVideo:function(){if(!this.html5Video)return this.getVarsObject(),void this.V.newVideo(this.vars);var t=this.VA,e=this.vars,i=0;if(!(t.length<1)){if(null!=this.V&&0==this.needSeek&&(this.needSeek=this.V.currentTime),e.poster?this.V.poster=e.poster:this.V.removeAttribute("poster"),e.loop?this.V.loop="loop":this.V.removeAttribute("loop"),e.seek>0?this.needSeek=e.seek:this.needSeek=0,".m3u8"!=this.getFileExt(t[0][0])&&(this.isM3u8=!1),this.isM3u8)this.embedHls(t[0][0],e.autoplay);else{if(1==t.length)this.V.innerHTML="",this.V.src=t[0][0];else{var s="";for(t=this.arrSort(t),i=0;i<t.length;i++){var n="",r=t[i];r[1]&&(n=' type="'+r[1]+'"'),s+='<source src="'+r[0]+'"'+n+">"}this.V.removeAttribute("src"),this.V.innerHTML=s}e.autoplay?this.V.autoplay="autoplay":this.V.removeAttribute("autoplay"),this.V.load()}this.isUndefined(e.volume)||this.changeVolume(e.volume),this.resetPlayer(),this.timerErrorFun(),this.addListenerVideoChange(),this.vars.chtrack&&this.loadTrack()}},elementCoordinate:function(){this.pdCoor=this.getXY(this.PD),this.css(this.CB.pauseCenter,{left:parseInt(.5*(this.PD.offsetWidth-80))+"px",top:parseInt(.5*(this.PD.offsetHeight-80))+"px"}),this.css(this.CB.loading,{left:parseInt(.5*(this.PD.offsetWidth-60))+"px",top:parseInt(.5*(this.PD.offsetHeight-60))+"px"}),this.css(this.CB.errorText,{left:parseInt(.5*(this.PD.offsetWidth-120))+"px",top:parseInt(.5*(this.PD.offsetHeight-30))+"px"}),this.css(this.CB.logo,{left:parseInt(this.PD.offsetWidth-this.CB.logo.offsetWidth-20)+"px",top:"20px"}),this.checkBarWidth()},checkBarWidth:function(){var t=this.CB.controlBar.offsetWidth,e=[];e.push([[this.CB.full,this.CB.escFull,this.CB.fullLine],this.buttonWidth.full+2,"full"]),""!=this.vars.front&&e.push([[this.CB.front,this.CB.frontLine],this.buttonWidth.front+2]),""!=this.vars.next&&e.push([[this.CB.next,this.CB.nextLine],this.buttonWidth.next+2]),""!=this.CB.definition.innerHTML&&e.push([[this.CB.definition,this.CB.definitionLine],this.buttonWidth.definition+2]),e.push([[this.CB.volume],this.buttonWidth.volume]),e.push([[this.CB.mute,this.CB.escMute,this.CB.muteLine],this.buttonWidth.mute+2,"mute"]),e.push([[this.CB.timeText],this.buttonWidth.timeText]),e.push([[this.CB.play,this.CB.pause,this.CB.playLine],this.buttonWidth.play+2,"play"]);var i=0,s=0,n=!0;for(i=0;i<e.length;i++){var r=e[i][1];r>2?s+=r:n=!1}n&&(this.buttonLen=s,this.buttonArr=e),s=this.buttonLen,e=this.buttonArr;for(i=0;i<e.length;i++)if(s>t)s-=e[i][1],this.css(e[i][0],"display","none");else if(this.css(e[i][0],"display","block"),3==e[i].length){var o=e[i][2];switch(o){case"mute":0==this.volume?this.css(this.CB.mute,"display","none"):this.css(this.CB.escMute,"display","none");break;case"play":this.playShow(!this.V.paused);break;case"full":this.full?this.css(this.CB.full,"display","none"):this.css(this.CB.escFull,"display","none")}}},initPlayPause:function(){this.vars.autoplay?(this.css([this.CB.play,this.CB.pauseCenter],"display","none"),this.css(this.CB.pause,"display","block")):(this.css(this.CB.play,"display","block"),"none"==this.css(this.CB.errorText,"display")&&this.css(this.CB.pauseCenter,"display","block"),this.css(this.CB.pause,"display","none"))},addListenerError:function(){for(var i=0;i<this.errorFunArr.length;i++){var fun=this.errorFunArr[i];"string"==typeof fun?(fun=fun.replace("()",""),eval(fun+"()")):fun()}},delErrorFunArr:function(t){try{var e=this.errorFunArr.indexOf(t);e>-1&&this.errorFunArr.splice(e,1)}catch(t){}},addListenerFull:function(){for(var i=0;i<this.fullFunArr.length;i++){var fun=this.fullFunArr[i];"string"==typeof fun?(fun=fun.replace("()",""),eval(fun+"()")):fun()}},delFullFunArr:function(t){try{var e=this.fullFunArr.indexOf(t);e>-1&&this.fullFunArr.splice(e,1)}catch(t){}},addListenerVideoChange:function(){for(var i=0;i<this.videoChangeFunArr.length;i++){var fun=this.videoChangeFunArr[i];"string"==typeof fun?(fun=fun.replace("()",""),eval(fun+"()")):fun()}},delVideoChangeFunArr:function(t){try{var e=this.videoChangeFunArr.indexOf(t);e>-1&&this.videoChangeFunArr.splice(e,1)}catch(t){}},loadedHandler:function(){if(this.loaded=!0,"html5video"!=this.playerType&&(this.V.changeLanguage(this.language),this.contextMenu.length>0&&this.V.newMenu(this.contextMenu),this.config&&this.V.config(this.config)),""!=this.vars.loaded){try{eval(this.vars.loaded+"()")}catch(t){}this.addListenerVideoChange()}},playingHandler:function(){this.playShow(!0),this.needSeek>0&&(this.seek(this.needSeek),this.needSeek=0),this.animatePauseArray.length>0&&this.animateResume("pause"),"html5video"==this.playerType&&null!=this.V&&this.config.videoDrawImage&&this.sendVCanvas()},sendVCanvas:function(){if(null==this.timerVCanvas){this.css(this.V,"display","none"),this.css(this.MD,"display","block");var t=this,e=function(){t.MDCX.width!=t.PD.offsetWidth&&(t.MDC.width=t.PD.offsetWidth),t.MDCX.height!=t.PD.offsetHeight&&(t.MDC.height=t.PD.offsetHeight),t.MDCX.clearRect(0,0,t.MDCX.width,t.MDCX.height);var e=t.getProportionCoor(t.PD.offsetWidth,t.PD.offsetHeight,t.V.videoWidth,t.V.videoHeight);t.MDCX.drawImage(t.V,0,0,t.V.videoWidth,t.V.videoHeight,e.x,e.y,e.width,e.height)};this.timerVCanvas=new this.timer(0,e)}},pauseHandler:function(){this.playShow(!1),this.animatePauseArray.length>0&&this.animatePause("pause"),"html5video"==this.playerType&&null!=this.V&&this.config.videoDrawImage&&this.stopVCanvas()},stopVCanvas:function(){null!=this.timerVCanvas&&(this.css(this.V,"display","block"),this.css(this.MD,"display","none"),this.timerVCanvas.runing&&this.timerVCanvas.stop(),this.timerVCanvas=null)},playShow:function(t){t?(this.css(this.CB.play,"display","none"),this.css(this.CB.pauseCenter,"display","none"),this.css(this.CB.pause,"display","block")):(this.css(this.CB.play,"display","block"),"none"==this.css(this.CB.errorText,"display")?this.css(this.CB.pauseCenter,"display","block"):this.css(this.CB.pauseCenter,"display","none"),this.css(this.CB.pause,"display","none"))},seekedHandler:function(){this.resetTrack(),this.isTimeButtonMove=!0,this.V.paused&&this.play()},endedHandler:function(){this.vars.loop||this.pause()},volumechangeHandler:function(){try{this.V.volume>0?(this.css(this.CB.mute,"display","block"),this.css(this.CB.escMute,"display","none")):(this.css(this.CB.mute,"display","none"),this.css(this.CB.escMute,"display","block"))}catch(t){}},timeUpdateHandler:function(){var t=0;if("html5video"==this.playerType)try{t=this.V.duration}catch(t){}t>0&&(this.time=this.V.currentTime,this.timeTextHandler(),this.trackShowHandler(),this.isTimeButtonMove&&this.timeProgress(this.time,t))},timeProgress:function(t,e){var i=this.CB.timeProgressBg.offsetWidth,s=parseInt(t*i/e-.5*this.CB.timeButton.offsetWidth);s>i-this.CB.timeButton.offsetWidth&&(s=i-this.CB.timeButton.offsetWidth),s<0&&(s=0),this.css(this.CB.timeProgress,"width",s+"px"),this.css(this.CB.timeButton,"left",parseInt(s)+"px")},timeTextHandler:function(){var t=this.V.duration,e=this.V.currentTime;isNaN(t)&&(t=0),this.CB.timeText.innerHTML=this.formatTime(e)+" / "+this.formatTime(t),this.CB.timeText.offsetWidth>0&&(this.buttonWidth.timeText=this.CB.timeText.offsetWidth)},bufferEdHandler:function(){var t=this,e=function(){null!=t.timerBuffer&&(t.timerBuffer.runing&&t.timerBuffer.stop(),t.timerBuffer=null)};e();var i=function(){if(t.V.buffered.length>0){var i=t.V.duration,s=t.V.buffered.length,n=t.V.buffered.start(s-1),r=t.V.buffered.end(s-1),o=n+r,a=t.CB.timeProgressBg.offsetWidth,l=t.CB.timeButton.offsetWidth,h=parseInt(o*a/i+l);h>=a&&(h=a,e()),t.changeLoad(o)}};this.timerBuffer=new this.timer(200,i)},changeLoad:function(t){if(null!=this.V){var e=this.CB.timeProgressBg.offsetWidth,i=this.CB.timeButton.offsetWidth,s=this.V.duration;this.isUndefined(t)?t=this.loadTime:this.loadTime=t;var n=parseInt(t*e/s+i);this.css(this.CB.loadProgress,"width",n+"px")}},judgeIsLive:function(){var t=this;null!=this.timerError&&(this.timerError.runing&&this.timerError.stop(),this.timerError=null),this.error=!1,this.css(this.CB.errorText,"display","none");var e=function(e){t.timeUpdateHandler()};if(this.vars.live){this.removeListener("timeupdate",e),null!=this.timerTime&&(window.clearInterval(this.timerTime),timerTime=null),null!=this.timerTime&&(this.timerTime.runing&&this.timerTime.stop(),this.timerTime=null);var i=function(){null==t.V||t.V.paused||(t.CB.timeText.innerHTML=t.getNowDate())};this.timerTime=new this.timer(1e3,i)}else null!=this.V&&"html5video"==this.playerType&&(this.addListener("timeupdate",e),t.timeTextHandler(),t.prompt(),window.setTimeout(function(){t.bufferEdHandler()},200));this.definition()},loadTrack:function(){var t=this,e=this.vars.chtrack,i={method:"get",dataType:"text",url:e.src,charset:e.charset,success:function(e){t.track=t.parseSrtSubtitles(e),t.trackIndex=0,t.nowTrackShow={sn:""}}};this.ajax(i)},resetTrack:function(){this.trackIndex=0,this.nowTrackShow={sn:""}},trackShowHandler:function(){if(!(this.track.length<1)){this.trackIndex>=this.track.length&&(this.trackIndex=0);var t=this.track[this.trackIndex];if(this.time>=t.startTime&&this.time<=t.endTime){var e=this.nowTrackShow;e.sn!=t.sn&&(this.trackHide(),this.trackShow(t))}else this.trackHide(),this.checkTrack()}},trackShow:function(t){this.nowTrackShow=t;for(var e=t.content,i=0;i<e.length;i++){var s={list:[{type:"text",text:e[i],fontColor:"#FFFFFF",fontSize:16,fontFamily:'"Microsoft YaHei", YaHei, "微软雅黑", SimHei,"FAE8F6F96C59ED1", "黑体",Arial',lineHeight:30}],position:[1,2,null,30*-(e.length-i)-50]},n=this.addElement(s);this.trackElement.push(n)}},trackHide:function(){for(var t=0;t<this.trackElement.length;t++)this.deleteElement(this.trackElement[t]);this.trackElement=[]},checkTrack:function(){var t=this.trackIndex,e=this.track,i=0;for(i=t;i<e.length;i++)if(this.time>=e[i].startTime&&this.time<=e[i].endTime){this.trackIndex=i;break}},playOrPause:function(){if(this.config.videoClick){if(null==this.V)return;this.V.paused?this.play():this.pause()}},play:function(){null!=this.V&&!this.error&&this.loaded&&("html5video"==this.playerType?this.V.play():this.V.videoPlay())},pause:function(){null!=this.V&&!this.error&&this.loaded&&("html5video"==this.playerType?this.V.pause():this.V.videoPause())},seek:function(t){if(this.loaded){var e=this.getMetaDate(),i=e.duration;i>0&&t>i&&(t=i),this.html5Video&&"html5video"==this.playerType&&!this.error?this.V.currentTime=t:this.V.seek(t)}},changeVolume:function(t,e,i){if((isNaN(t)||this.isUndefined(t))&&(t=0),this.loaded||(this.vars.volume=t),this.html5Video){try{this.isUndefined(e)&&(e=!0)}catch(t){}try{this.isUndefined(i)&&(i=!0)}catch(t){}if(t<0&&(t=0),t>1&&(t=1),this.V.volume=t,this.volume=t,e){var s=t*this.CB.volumeBg.offsetWidth;s<0&&(s=0),s>this.CB.volumeBg.offsetWidth&&(s=this.CB.volumeBg.offsetWidth),this.css(this.CB.volumeUp,"width",s+"px")}if(i){var n=parseInt(this.CB.volumeUp.offsetWidth-.5*this.CB.volumeBO.offsetWidth);n>this.CB.volumeBg.offsetWidth-this.CB.volumeBO.offsetWidth&&(n=this.CB.volumeBg.offsetWidth-this.CB.volumeBO.offsetWidth),n<0&&(n=0),this.css(this.CB.volumeBO,"left",n+"px")}}else this.V.changeVolume(t)},switchFull:function(){this.full?this.quitFullScreen():this.fullScreen()},fullScreen:function(){if(this.html5Video&&"html5video"==this.playerType){var t=this.PD;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),this.judgeFullScreen()}},quitFullScreen:function(){this.html5Video&&"html5video"==this.playerType&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.oRequestFullscreen?document.oCancelFullScreen():document.requestFullscreen?document.requestFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():(this.css(document.documentElement,"cssText",""),this.css(document.document.body,"cssText",""),this.css(this.PD,"cssText","")),this.judgeFullScreen())},changeSize:function(t,e){this.isUndefined(t)&&(t=0),this.isUndefined(e)&&(e=0),t>0&&this.css(this.CD,"width",t+"px"),e>0&&this.css(this.CD,"height",e+"px"),this.html5Video&&this.elementCoordinate()},newVideo:function(t){this.embed(t)},getMetaDate:function(){if(!this.loaded||null==this.V)return!1;if("html5video"==this.playerType){var t=0;try{t=isNaN(this.V.duration)?0:this.V.duration}catch(t){}var e={duration:t,volume:this.V.volume,width:this.PD.offsetWidth||this.V.offsetWidth||this.V.width,height:this.PD.offsetHeight||this.V.offsetHeight||this.V.height,videoWidth:this.V.videoWidth,videoHeight:this.V.videoHeight,paused:this.V.paused};return e}return this.V.getMetaDate()},getVideoUrl:function(){var t=[];if(this.V.src)t.push(this.V.src);else for(var e=this.V.childNodes,i=0;i<e.length;i++)t.push(e[i].src);return t},addElement:function(t){var e=0,i={list:null,x:"100%",y:"50%",position:null,alpha:1,backgroundColor:"",backAlpha:1,backRadius:0};i=this.standardization(i,t);var s=i.list;if(null==s)return"";var n="element"+this.randomString(10),r=document.createElement("div");r.className=n,i.x&&r.setAttribute("data-x",i.x),i.y&&r.setAttribute("data-y",i.y),null!=i.position&&r.setAttribute("data-position",i.position.join(",")),this.PD.appendChild(r);var o=this.getByElement(n);this.css(o,{position:"absolute",filter:"alpha(opacity:"+i.alpha+")",opacity:i.alpha.toString(),width:"800px",zIndex:"20"});var a,l="elementbg"+this.randomString(10),h=i.backAlpha.toString(),d=i.backgroundColor,c="",u=[];if(!this.isUndefined(s)&&s.length>0)for(e=0;e<s.length;e++){var p="elementnew"+this.randomString(10);switch(s[e].type){case"image":a={type:"image",url:"",radius:0,width:30,height:30,alpha:1,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,backgroundColor:"#FFFFFF"},s[e]=this.standardization(a,s[e]),c+='<div class="'+p+'"><img class="'+p+'_image" src="'+s[e].url+'"></div>';break;case"text":a={type:"text",text:"",fontColor:"#FFFFFF",fontSize:14,fontFamily:'"Microsoft YaHei", YaHei, "微软雅黑", SimHei,"FAE8F6F96C59ED1", "黑体",Arial',lineHeight:0,alpha:1,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,backgroundColor:"",backAlpha:1,backRadius:0},s[e]=this.standardization(a,s[e]),c+='<div class="'+p+'"><div class="'+p+'_bg"></div><div class="'+p+'_text">'+s[e].text+"</div></div>"}u.push(p)}for(o.innerHTML='<div class="'+l+'"></div><div class="'+l+'_c">'+c+"</div>",this.css(l+"_c",{position:"absolute",zIndex:"2"}),e=0;e<u.length;e++)switch(s[e].type){case"image":this.css(u[e],{float:"left",width:s[e].width+"px",height:s[e].height+"px",filter:"alpha(opacity:"+s[e].alpha+")",opacity:s[e].alpha.toString(),marginLeft:s[e].marginLeft+"px",marginRight:s[e].marginRight+"px",marginTop:s[e].marginTop+"px",marginBottom:s[e].marginBottom+"px",borderRadius:s[e].radius+"px"}),this.css(u[e]+"_image",{width:s[e].width+"px",height:s[e].height+"px",borderRadius:s[e].radius+"px"});break;case"text":this.css(u[e]+"_text",{filter:"alpha(opacity:"+s[e].alpha+")",opacity:s[e].alpha.toString(),borderRadius:s[e].radius+"px",fontFamily:s[e].fontFamily,fontSize:s[e].fontSize+"px",color:s[e].fontColor,lineHeight:s[e].lineHeight>0?s[e].lineHeight+"px":"",paddingLeft:s[e].paddingLeft+"px",paddingRight:s[e].paddingRight+"px",paddingTop:s[e].paddingTop+"px",paddingBottom:s[e].paddingBottom+"px",whiteSpace:"nowrap",position:"absolute",zIndex:"3"}),this.css(u[e],{float:"left",width:this.getByElement(u[e]+"_text").offsetWidth+"px",height:this.getByElement(u[e]+"_text").offsetHeight+"px",marginLeft:s[e].marginLeft+"px",marginRight:s[e].marginRight+"px",marginTop:s[e].marginTop+"px",marginBottom:s[e].marginBottom+"px"}),this.css(u[e]+"_bg",{width:this.getByElement(u[e]+"_text").offsetWidth+"px",height:this.getByElement(u[e]+"_text").offsetHeight+"px",filter:"alpha(opacity:"+s[e].backAlpha+")",opacity:s[e].backAlpha.toString(),borderRadius:s[e].backRadius+"px",backgroundColor:s[e].backgroundColor,position:"absolute",zIndex:"2"})}this.css(l,{width:this.getByElement(l+"_c").offsetWidth+"px",height:this.getByElement(l+"_c").offsetHeight+"px",position:"absolute",filter:"alpha(opacity:"+h+")",opacity:h,backgroundColor:d,borderRadius:i.backRadius+"px",zIndex:"1"}),this.css(o,{width:this.getByElement(l).offsetWidth+"px",height:this.getByElement(l).offsetHeight+"px"});var m=this.calculationCoor(o);return this.css(o,{left:m.x+"px",top:m.y+"px"}),this.elementArr.push(o.className),o},getElement:function(t){var e=t;"string"==typeof t&&(e=this.getByElement(t));var i=this.getCoor(e);return{x:i.x,y:i.y,width:e.offsetWidth,height:e.offsetHeight,alpha:this.isUndefined(this.css(e,"opacity"))?1:parseFloat(this.css(e,"opacity"))}},calculationCoor:function(t){if(t!=[]){var e,i,s=[],n=this.PD.offsetWidth,r=this.PD.offsetHeight,o=t.offsetWidth,a=t.offsetHeight;if(this.isUndefined(t.dataset.x)||(e=t.dataset.x),this.isUndefined(t.dataset.y)||(i=t.dataset.y),this.isUndefined(t.dataset.position)||(s=t.dataset.position.split(",")),s.length>0){s.push(null,null,null,null);var l=0;for(l=0;l<s.length;l++)this.isUndefined(s[l])||null==s[l]||"null"==s[l]||""==s[l]?s[l]=null:s[l]=parseFloat(s[l]);if(null==s[2])switch(s[0]){case 0:e=0;break;case 1:e=parseInt(.5*(n-o));break;default:e=n-o}else switch(s[0]){case 0:e=s[2];break;case 1:e=parseInt(.5*n)+s[2];break;default:e=n+s[2]}if(null==s[3])switch(s[1]){case 0:i=0;break;case 1:i=parseInt(.5*(r-a));break;default:i=r-a}else switch(s[1]){case 0:i=s[3];break;case 1:i=parseInt(.5*r)+s[3];break;default:i=r+s[3]}}else"%"==e.substring(e.length-1,e.length)&&(e=Math.floor(parseInt(e.substring(0,e.length-1))*n*.01)),"%"==i.substring(i.length-1,i.length)&&(i=Math.floor(parseInt(i.substring(0,i.length-1))*r*.01));return{x:e,y:i}}},changeElementCoor:function(){for(var t=0;t<this.elementArr.length;t++)if(this.getByElement(this.elementArr[t])!=[]){var e=this.calculationCoor(this.getByElement(this.elementArr[t]));this.css(this.elementArr[t],{top:e.y+"px",left:e.x+"px"})}},tween:function(){var t={None:{easeIn:function(t,e,i,s){return i*t/s+e},easeOut:function(t,e,i,s){return i*t/s+e},easeInOut:function(t,e,i,s){return i*t/s+e}},Quadratic:{easeIn:function(t,e,i,s){return i*(t/=s)*t+e},easeOut:function(t,e,i,s){return-i*(t/=s)*(t-2)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},Cubic:{easeIn:function(t,e,i,s){return i*(t/=s)*t*t+e},easeOut:function(t,e,i,s){return i*((t=t/s-1)*t*t+1)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},Quartic:{easeIn:function(t,e,i,s){return i*(t/=s)*t*t*t+e},easeOut:function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}},Quintic:{easeIn:function(t,e,i,s){return i*(t/=s)*t*t*t*t+e},easeOut:function(t,e,i,s){return i*((t=t/s-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},Sine:{easeIn:function(t,e,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+e},easeOut:function(t,e,i,s){return i*Math.sin(t/s*(Math.PI/2))+e},easeInOut:function(t,e,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+e}},Exponential:{easeIn:function(t,e,i,s){return 0==t?e:i*Math.pow(2,10*(t/s-1))+e},easeOut:function(t,e,i,s){return t==s?e+i:i*(1-Math.pow(2,-10*t/s))+e},easeInOut:function(t,e,i,s){return 0==t?e:t==s?e+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e}},Circular:{easeIn:function(t,e,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+e},easeOut:function(t,e,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+e},easeInOut:function(t,e,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},Elastic:{easeIn:function(t,e,i,s,n,r){if(0==t)return e;if(1==(t/=s))return e+i;if(r||(r=.3*s),!n||n<Math.abs(i)){n=i;var o=r/4}else o=r/(2*Math.PI)*Math.asin(i/n);return-n*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*(2*Math.PI)/r)+e},easeOut:function(t,e,i,s,n,r){if(0==t)return e;if(1==(t/=s))return e+i;if(r||(r=.3*s),!n||n<Math.abs(i)){n=i;var o=r/4}else o=r/(2*Math.PI)*Math.asin(i/n);return n*Math.pow(2,-10*t)*Math.sin((t*s-o)*(2*Math.PI)/r)+i+e},easeInOut:function(t,e,i,s,n,r){if(0==t)return e;if(2==(t/=s/2))return e+i;if(r||(r=s*(.3*1.5)),!n||n<Math.abs(i)){n=i;var o=r/4}else o=r/(2*Math.PI)*Math.asin(i/n);return t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*s-o)*(2*Math.PI)/r)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*s-o)*(2*Math.PI)/r)*.5+i+e}},Back:{easeIn:function(t,e,i,s,n){return null==n&&(n=1.70158),i*(t/=s)*t*((n+1)*t-n)+e},easeOut:function(t,e,i,s,n){return null==n&&(n=1.70158),i*((t=t/s-1)*t*((n+1)*t+n)+1)+e},easeInOut:function(t,e,i,s,n){return null==n&&(n=1.70158),(t/=s/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e}},Bounce:{easeIn:function(e,i,s,n){return s-t.Bounce.easeOut(n-e,0,s,n)+i},easeOut:function(t,e,i,s){return(t/=s)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOut:function(e,i,s,n){return e<n/2?.5*t.Bounce.easeIn(2*e,0,s,n)+i:.5*t.Bounce.easeOut(2*e-n,0,s,n)+.5*s+i}}};return t},animate:function(attribute){var thisTemp=this,animateId="animate_"+this.randomString(),obj={element:null,parameter:"x",static:!1,effect:"None.easeIn",start:null,end:null,speed:0,overStop:!1,pauseStop:!1,callBack:null};if(obj=this.standardization(obj,attribute),null==obj.element||0==obj.speed)return!1;var w=this.PD.offsetWidth,h=this.PD.offsetHeight,effArr=(obj.effect+".").split("."),tweenFun=this.tween()[effArr[0]][effArr[1]],eleCoor={x:0,y:0};if(this.isUndefined(tweenFun))return!1;var def=this.arrIndexOf(this.elementArr,obj.element.className);def>-1&&this.elementArr.splice(def,1);var css={},pm=this.getElement(obj.element),t=0,b=0,c=0,d=1e3*obj.speed,timerTween=null,tweenObj=null,start=null==obj.start?"":obj.start.toString(),end=null==obj.end?"":obj.end.toString();switch(obj.parameter){case"x":b=null==obj.start?pm.x:"%"==start.substring(start.length-1,start.length)?parseInt(start)*w*.01:parseInt(start),c=null==obj.end?pm.x-b:"%"==end.substring(end.length-1,end.length)?parseInt(end)*w*.01-b:"-"==end.substring(0,1)||"+"==end.substring(0,1)?"number"==typeof obj.end?parseInt(obj.end)-b:parseInt(end):parseInt(end)-b;break;case"y":b=null==obj.start?pm.y:"%"==start.substring(start.length-1,start.length)?parseInt(start)*h*.01:parseInt(start),c=null==obj.end?pm.y-b:"%"==end.substring(end.length-1,end.length)?parseInt(end)*h*.01-b:"-"==end.substring(0,1)||"+"==end.substring(0,1)?"number"==typeof obj.end?parseInt(obj.end)-b:parseInt(end):parseInt(end)-b;break;case"alpha":b=null==obj.start?100*pm.alpha:"%"==start.substring(start.length-1,start.length)?parseInt(obj.start):parseInt(100*obj.start),c=null==obj.end?100*pm.alpha-b:"%"==end.substring(end.length-1,end.length)?parseInt(end)-b:"-"==end.substring(0,1)||"+"==end.substring(0,1)?"number"==typeof obj.end?100*parseInt(obj.end)-b:100*parseInt(obj.end):100*parseInt(obj.end)-b}var callBack=function(){var index=thisTemp.arrIndexOf(thisTemp.animateElementArray,animateId);if(index>-1&&(thisTemp.animateArray.splice(index,1),thisTemp.animateElementArray.splice(index,1)),index=thisTemp.arrIndexOf(thisTemp.animatePauseArray,animateId),index>-1&&thisTemp.animatePauseArray.splice(index,1),
null!=obj.callBack&&obj.element&&"callBack"!=obj.callBack&&"tweenX"!=obj.callBack&&"callBack"!=obj.tweenY&&"tweenAlpha"!=obj.callBack){var cb=eval(obj.callBack);cb(obj.element),obj.callBack=null}},stopTween=function(){null!=timerTween&&(timerTween.runing&&timerTween.stop(),timerTween=null)},tweenX=function(){t<d?(t+=10,css={left:Math.ceil(tweenFun(t,b,c,d))+"px"},obj.static&&(eleCoor=thisTemp.calculationCoor(obj.element),css.top=eleCoor.y+"px"),thisTemp.css(obj.element,css)):(stopTween(),thisTemp.elementArr.push(obj.element.className),callBack())},tweenY=function(){t<d?(t+=10,css={top:Math.ceil(tweenFun(t,b,c,d))+"px"},obj.static&&(eleCoor=thisTemp.calculationCoor(obj.element),css.left=eleCoor.x+"px"),thisTemp.css(obj.element,css)):(stopTween(),thisTemp.elementArr.push(obj.element.className),callBack())},tweenAlpha=function(){if(t<d){t+=10,eleCoor=thisTemp.calculationCoor(obj.element);var e=.01*Math.ceil(tweenFun(t,b,c,d));css={filter:"alpha(opacity:"+e+")",opacity:e.toString()},obj.static&&(eleCoor=thisTemp.calculationCoor(obj.element),css.top=eleCoor.y+"px",css.left=eleCoor.x+"px"),thisTemp.css(obj.element,css)}else stopTween(),thisTemp.elementArr.push(obj.element.className),callBack()};switch(obj.parameter){case"x":tweenObj=tweenX;break;case"y":tweenObj=tweenY;break;case"alpha":tweenObj=tweenAlpha}if(timerTween=new thisTemp.timer(10,tweenObj),obj.overStop){var mouseOver=function(){null!=timerTween&&timerTween.runing&&timerTween.stop()};this.addListener("mouseover",mouseOver,obj.element);var mouseOut=function(){var t=!0;obj.pauseStop&&thisTemp.getMetaDate().paused&&(t=!1),null!=timerTween&&!timerTween.runing&&t&&timerTween.start()};this.addListener("mouseout",mouseOut,obj.element)}return this.animateArray.push(timerTween),this.animateElementArray.push(animateId),obj.pauseStop&&this.animatePauseArray.push(animateId),animateId},animateResume:function(t){var e=[];""==t||this.isUndefined(t)||"pause"==t?e="pause"===t?this.animatePauseArray:this.animateElementArray:e.push(t);for(var i=0;i<e.length;i++){var s=this.arrIndexOf(this.animateElementArray,e[i]);s>-1&&this.animateArray[s].start()}},animatePause:function(t){var e=[];""==t||this.isUndefined(t)||"pause"==t?e="pause"===t?this.animatePauseArray:this.animateElementArray:e.push(t);for(var i=0;i<e.length;i++){var s=this.arrIndexOf(this.animateElementArray,e[i]);s>-1&&this.animateArray[s].stop()}},deleteAnimate:function(t){var e=this.arrIndexOf(this.animateElementArray,t);e>-1&&(this.animateArray.splice(e,1),this.animateElementArray.splice(e,1))},deleteElement:function(t){var e=this.arrIndexOf(this.elementArr,t.className);e>-1&&this.elementArr.splice(e,1),this.deleteAnimate(t),this.deleteChild(t)},getByElement:function(t,e){this.isUndefined(e)&&(e=document);var i=t.substr(0,1),s=[];if("#"!=i){if("."==i&&(t=t.substr(1,t.length)),e.getElementsByClassName)s=e.getElementsByClassName(t);else for(var n=new RegExp(" "+t+" ","i"),r=e.getElementsByTagName("*"),o=0;o<r.length;o++)n.test(" "+r[o].className+" ")&&s.push(r[o]);return s.length>0?s[0]:s}return"#"==i&&(t=t.substr(1,t.length)),document.getElementById(t)},css:function(t,e,i){var s=0,n="";if("object"!=typeof t||this.isUndefined(typeof t.length))if("string"==typeof t&&(t=this.getByElement(t)),"object"!=typeof e){if(this.isUndefined(i))return!this.isUndefined(t.style[e])&&t.style[e];t.style[e]=i}else for(n in e)this.isUndefined(e[n])||(t.style[n]=e[n]);else for(s=0;s<t.length;s++){var r;if(r="string"==typeof t[s]?this.getByElement(t[s]):t[s],"object"!=typeof e)this.isUndefined(i)||(r.style[e]=i);else for(n in e)this.isUndefined(e[n])||(r.style[n]=e[n])}},isUndefined:function(t){try{if("undefined"==t||null==t)return!0}catch(t){}return!1},addListener:function(t,e,i,s){if(this.isUndefined(s)&&(s=!1),"full"!=t)if("error"==t&&this.isUndefined(i))this.errorFunArr.push(e);else if("videochange"!=t){var n=this.V;if(this.isUndefined(i)||(n=i),this.listenerArr.push([t,e,i,s]),n.addEventListener)try{n.addEventListener(t,e,s)}catch(t){}else if(n.attachEvent)try{n.attachEvent("on"+t,e)}catch(t){}else n["on"+t]=e}else this.videoChangeFunArr.push(e);else this.fullFunArr.push(e)},removeListener:function(t,e,i,s){if(this.isUndefined(s)&&(s=!1),"full"!=t)if("error"!=t)if("videochange"!=t){var n=this.V;this.isUndefined(i)||(n=i);for(var r=0;r<this.listenerArr.length;r++)if([t,e,i,s]==this.listenerArr[r]){this.listenerArr.splice(r,1);break}if(n.removeEventListener)try{this.addNum--,n.removeEventListener(t,e,s)}catch(t){}else if(n.detachEvent)try{n.detachEvent("on"+t,e)}catch(t){}else n["on"+t]=null}else this.delVideoChangeFunArr(e);else this.delErrorFunArr(e);else this.delFullFunArr(e)},getParameterNames:function(t){if("function"!=typeof t)return!1;var e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,i=t.toString().replace(e,""),s=i.slice(i.indexOf(" ")+1,i.indexOf("("));return null!==s&&s},getNowDate:function(){var t=new Date,e=t.getMonth()+1,i=t.getDate(),s=t.getHours(),n=t.getMinutes(),r=t.getSeconds(),o="",a="",l="",h="",d="";d=r<10?"0"+r:r+"",h=n<10?"0"+n:n+"",l=s<10?"0"+s:s+"",a=i<10?"0"+i:i+"",o=e<10?"0"+e:e+"";return o+"/"+a+" "+l+":"+h+":"+d},formatTime:function(t,e){var i="",s="",n="";isNaN(t)&&(t=0);var r=Math.floor(t%60),o=0,a=0;return e?(o=Math.floor(t/60)%60,a=Math.floor(t/3600)):o=Math.floor(t/60),i=r<10?"0"+r:r+"",s=o>0?o<10?"0"+o+":":o+":":"00:",n=a>0?a<10?"0"+a+":":a+":":"",e?n+s+i:s+i},randomString:function(t){t=t||16;var e="abcdefghijklmnopqrstuvwxyz",s=e.length,n="";for(i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*s));return"ch"+n},getStringLen:function(t){for(var e=0,i=0;i<t.length;i++)t.charCodeAt(i)>127||94==t.charCodeAt(i)?e+=2:e++;return e},createXHR:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){this.eject(this.errorList[7])}}else this.eject(this.errorList[8])},ajax:function(cObj){var thisTemp=this,callback=null,obj={method:"get",dataType:"json",charset:"utf-8",async:!1,url:"",data:null,success:null};if("object"==typeof cObj){if(obj=this.standardization(obj,cObj),"json"===obj.dataType||"text"===obj.dataType||"html"===obj.dataType){var xhr=this.createXHR();callback=function(){if(200==xhr.status){if(null==obj.success)return;"json"===obj.dataType?obj.success(eval("("+xhr.responseText+")")):obj.success(xhr.responseText)}else thisTemp.eject(thisTemp.errorList[10],"Ajax.status:"+xhr.status)},obj.url=obj.url+"?rand="+this.randomString(6),obj.data=this.formatParams(obj.data),"get"!==obj.method||this.isUndefined(obj.data)||(obj.url+=-1==obj.url.indexOf("?")?"?"+obj.data:"&"+obj.data),!0===obj.async&&(xhr.onreadystatechange=function(){4==xhr.readyState&&callback()}),xhr.open(obj.method,obj.url,obj.async),"post"===obj.method?(xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.setRequestHeader("charset",obj.charset),xhr.send(obj.data)):xhr.send(null),!1===obj.async&&callback()}else if("jsonp"===obj.dataType){var oHead=document.getElementsByTagName("head")[0],oScript=document.createElement("script"),callbackName="callback"+(new Date).getTime(),params=this.formatParams(obj.data)+"&callback="+callbackName;callback=obj.success,oScript.src=obj.url.split("?")+"?"+params,oHead.insertBefore(oScript,oHead.firstChild),window[callbackName]=function(t){callback(t),oHead.removeChild(oScript)}}}else this.eject(this.errorList[9])},loadJs:function(t,e){var i=document.getElementsByTagName("HEAD").item(0),s=document.createElement("script");s.type="text/javascript",s.src=this.getNewUrl(t),i.appendChild(s),s.onload=function(){e()}},supportVideo:function(){if(document.createElement("video").canPlayType){var t=document.createElement("video");return oggTest=t.canPlayType('video/ogg; codecs="theora, vorbis"'),oggTest?"probably"==oggTest:(h264Test=t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),!!h264Test&&"probably"==h264Test)}return!1},formatParams:function(t){var e=[];for(var i in t)e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")},arrSort:function(t){for(var e=[],i=0;i<t.length;i++)for(var s=0;s<t.length-i;s++)!this.isUndefined(t[s+1])&&t[s][3]<t[s+1][3]&&(e=t[s+1],t[s+1]=t[s],t[s]=e);return t},getFileExt:function(t){if(""!=t){t.indexOf("?")>-1&&(t=t.split("?")[0]);var e="."+t.replace(/.+\./,"");return e}return""},isContains:function(t,e){return t.indexOf(e)>-1},getNewUrl:function(t){return this.isContains(t,"?")?t+"&"+this.randomString(8)+"="+this.randomString(8):t+"?"+this.randomString(8)+"="+this.randomString(8)},client:function(t){var e=t||window.event;return this.isUndefined(e)&&(e={clientX:0,clientY:0}),{x:e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)-this.pdCoor.x,y:e.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-this.pdCoor.y}},getCoor:function(t){var e=this.getXY(t);return{x:e.x-this.pdCoor.x,y:e.y-this.pdCoor.y}},getXY:function(t){for(var e=t,i=t.offsetLeft,s=t.offsetTop;e=e.offsetParent;)i+=e.offsetLeft,s+=e.offsetTop;return{x:i,y:s}},removeChild:function(){if("html5video"==this.playerType){var t=0,e=[this.timerError,this.timerFull,this.timerTime,this.timerBuffer,this.timerClick,this.timerLoading,this.timerCBar,this.timerVCanvas];for(t=0;t<e.length;t++)null!=e[t]&&(e[t].runing&&e[t].stop(),e[t]=null);var i=this.listenerArr;for(t=0;t<i.length;t++)this.removeListener(i[t][0],i[t][1],i[t][2],i[t][3])}this.playerType,this.V=null,this.deleteChild(this.CB.menu),this.deleteChild(this.PD),this.CD.innerHTML=""},canvasFill:function(t,e){t.beginPath();for(var i=0;i<e.length;i++){var s=e[i];i>0?t.lineTo(s[0],s[1]):t.moveTo(s[0],s[1])}t.closePath(),t.fill()},canvasFillRect:function(t,e){for(var i=0;i<e.length;i++){var s=e[i];t.fillRect(s[0],s[1],s[2],s[3])}},deleteChild:function(t){var e=this.arrIndexOf(this.elementArr,t.className);e>-1&&this.elementArr.splice(e,1);for(var i=t.childNodes,s=i.length-1;s>=0;s--)t.removeChild(i[s]);if(t&&null!=t&&t.parentNode)try{t.parentNode&&t.parentNode.removeChild(t)}catch(t){}},getProportionCoor:function(t,e,i,s){var n=0,r=0,o=0,a=0;return t/e<i/s?(n=t,r=n*s/i):(r=e,n=r*i/s),o=.5*(t-n),a=.5*(e-r),{width:parseInt(n),height:parseInt(r),x:parseInt(o),y:parseInt(a)}},parseSrtSubtitles:function(t){var e=[],i=[],s=0,n=t.split("\n"),r=[],o=function(t){return t.replace(/<[^>]+>/g,"")};for(s=0;s<n.length;s++)n[s].replace(/\s/g,"").length>0?r.push(n[s]):(r.length>0&&i.push(r),r=[]);for(s=0;s<i.length;++s){var a=i[s];if(a.length>=2){var l=a[0],h=this.toSeconds(this.trim(a[1].split(" --> ")[0])),d=this.toSeconds(this.trim(a[1].split(" --> ")[1])),c=[o(a[2])];if(a.length>2)for(var u=3;u<a.length;u++)c.push(o(a[u]));var p={sn:l,startTime:h,endTime:d,content:c};e.push(p)}}return e},timer:function(t,e,i){var s=this;this.time=10,this.fun=null,this.timeObj=null,this.number=0,this.numberTotal=null,this.runing=!1,this.startFun=function(){s.number++,s.fun(),null!=s.numberTotal&&s.number>=s.numberTotal&&s.stop()},this.start=function(){s.runing||(s.runing=!0,s.timeObj=window.setInterval(s.startFun,t))},this.stop=function(){s.runing&&(s.runing=!1,window.clearInterval(s.timeObj),s.timeObj=null)},t&&(this.time=t),e&&(this.fun=e),i&&(this.numberTotal=i),this.start()},toSeconds:function(t){var e=0;if(t){var s=t.split(":");for(i=0;i<s.length;i++)e=60*e+parseFloat(s[i].replace(",","."))}return e},standardization:function(t,e){var i,s={};for(i in t)s[i]=t[i];for(i in e){var n=typeof s[i];switch(n){case"number":s[i]=parseFloat(e[i]);break;case"string":"string"!=typeof e[i]&&void 0!==e[i]?s[i]=e[i].toString():s[i]=e[i];break;default:s[i]=e[i]}}return s},arrIndexOf:function(t,e){var i=new RegExp(e,[""]);return t.toString().replace(i,"┢").replace(/[^,┢]/g,"").indexOf("┢")},trim:function(t){return t.replace(/(^\s*)|(\s*$)/g,"")},log:function(t){try{console.log(t)}catch(t){}},eject:function(t,e){if(this.vars.debug){var i=t[1];this.isUndefined(e)||(i=i.replace("[error]",e));var s="error "+t[0]+":"+i;try{alert(s)}catch(t){}}}},window.chplayer=chplayer}();